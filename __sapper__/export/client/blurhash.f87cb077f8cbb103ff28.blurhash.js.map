{"version":3,"sources":["webpack://pinafore/./node_modules/blurhash/dist/base83.js","webpack://pinafore/./node_modules/blurhash/dist/decode.js","webpack://pinafore/./node_modules/blurhash/dist/encode.js","webpack://pinafore/./node_modules/blurhash/dist/error.js","webpack://pinafore/./node_modules/blurhash/dist/index.js","webpack://pinafore/./node_modules/blurhash/dist/utils.js","webpack://pinafore/./node_modules/promise-worker/register.js","webpack://pinafore/webpack/bootstrap","webpack://pinafore/webpack/runtime/compat get default export","webpack://pinafore/webpack/runtime/define property getters","webpack://pinafore/webpack/runtime/hasOwnProperty shorthand","webpack://pinafore/./src/routes/_static/blurhash.js","webpack://pinafore/./src/routes/_utils/thunk.js","webpack://pinafore/./src/routes/_utils/userAgent/isChrome.js","webpack://pinafore/./src/routes/_utils/userAgent/isChromePre82.js","webpack://pinafore/./src/routes/_workers/blurhash.js"],"names":["Object","defineProperty","exports","value","digitCharacters","decode83","str","i","length","c","indexOf","encode83","n","result","digit","Math","floor","pow","base83_1","utils_1","error_1","validateBlurhash","blurhash","ValidationError","sizeFlag","numY","numX","isBlurhashValid","error","errorReason","message","decodeDC","intR","intG","intB","sRGBToLinear","decodeAC","maximumValue","quantR","quantG","quantB","signPow","default","width","height","punch","colors","Array","substring","bytesPerRow","pixels","Uint8ClampedArray","y","x","r","g","b","j","basis","cos","PI","color","linearTosRGB","componentX","componentY","factors","_loop_1","_loop_2","normalisation","factor","basisFunction","scale","multiplyBasisFunction","push","dc","ac","slice","hash","actualMaximumValue","max","apply","map","val","quantisedMaximumValue","min","forEach","encodeAC","extendStatics","__extends","this","d","setPrototypeOf","__proto__","p","hasOwnProperty","__","constructor","prototype","create","_super","_this","call","name","Error","decode_1","decode","encode_1","encode","m","__export","v","round","sign","exp","abs","module","callback","postOutgoingMessage","e","messageId","postMessage","msg","self","ports","console","addEventListener","payload","data","isArray","obj","res","err","tryCatchFunc","then","finalResult","finalError","handleIncomingMessage","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","getter","__esModule","a","definition","key","o","enumerable","get","prop","BLURHASH_RESOLUTION","thunk","func","cached","runOnce","isChrome","test","navigator","userAgent","OFFSCREEN_CANVAS","parseInt","match","undefined","getChromeVersion","isChromePre82","OffscreenCanvas","OFFSCREEN_CANVAS_CONTEXT_2D","getContext","async","encoded","imageData","ImageData","putImageData","blob","convertToBlob","decoded","URL","createObjectURL"],"mappings":"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","file":"blurhash.f87cb077f8cbb103ff28.blurhash.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar digitCharacters = [\n    \"0\",\n    \"1\",\n    \"2\",\n    \"3\",\n    \"4\",\n    \"5\",\n    \"6\",\n    \"7\",\n    \"8\",\n    \"9\",\n    \"A\",\n    \"B\",\n    \"C\",\n    \"D\",\n    \"E\",\n    \"F\",\n    \"G\",\n    \"H\",\n    \"I\",\n    \"J\",\n    \"K\",\n    \"L\",\n    \"M\",\n    \"N\",\n    \"O\",\n    \"P\",\n    \"Q\",\n    \"R\",\n    \"S\",\n    \"T\",\n    \"U\",\n    \"V\",\n    \"W\",\n    \"X\",\n    \"Y\",\n    \"Z\",\n    \"a\",\n    \"b\",\n    \"c\",\n    \"d\",\n    \"e\",\n    \"f\",\n    \"g\",\n    \"h\",\n    \"i\",\n    \"j\",\n    \"k\",\n    \"l\",\n    \"m\",\n    \"n\",\n    \"o\",\n    \"p\",\n    \"q\",\n    \"r\",\n    \"s\",\n    \"t\",\n    \"u\",\n    \"v\",\n    \"w\",\n    \"x\",\n    \"y\",\n    \"z\",\n    \"#\",\n    \"$\",\n    \"%\",\n    \"*\",\n    \"+\",\n    \",\",\n    \"-\",\n    \".\",\n    \":\",\n    \";\",\n    \"=\",\n    \"?\",\n    \"@\",\n    \"[\",\n    \"]\",\n    \"^\",\n    \"_\",\n    \"{\",\n    \"|\",\n    \"}\",\n    \"~\"\n];\nexports.decode83 = function (str) {\n    var value = 0;\n    for (var i = 0; i < str.length; i++) {\n        var c = str[i];\n        var digit = digitCharacters.indexOf(c);\n        value = value * 83 + digit;\n    }\n    return value;\n};\nexports.encode83 = function (n, length) {\n    var result = \"\";\n    for (var i = 1; i <= length; i++) {\n        var digit = (Math.floor(n) / Math.pow(83, length - i)) % 83;\n        result += digitCharacters[Math.floor(digit)];\n    }\n    return result;\n};\n//# sourceMappingURL=base83.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar base83_1 = require(\"./base83\");\nvar utils_1 = require(\"./utils\");\nvar error_1 = require(\"./error\");\n/**\n * Returns an error message if invalid or undefined if valid\n * @param blurhash\n */\nvar validateBlurhash = function (blurhash) {\n    if (!blurhash || blurhash.length < 6) {\n        throw new error_1.ValidationError(\"The blurhash string must be at least 6 characters\");\n    }\n    var sizeFlag = base83_1.decode83(blurhash[0]);\n    var numY = Math.floor(sizeFlag / 9) + 1;\n    var numX = (sizeFlag % 9) + 1;\n    if (blurhash.length !== 4 + 2 * numX * numY) {\n        throw new error_1.ValidationError(\"blurhash length mismatch: length is \" + blurhash.length + \" but it should be \" + (4 + 2 * numX * numY));\n    }\n};\nexports.isBlurhashValid = function (blurhash) {\n    try {\n        validateBlurhash(blurhash);\n    }\n    catch (error) {\n        return { result: false, errorReason: error.message };\n    }\n    return { result: true };\n};\nvar decodeDC = function (value) {\n    var intR = value >> 16;\n    var intG = (value >> 8) & 255;\n    var intB = value & 255;\n    return [utils_1.sRGBToLinear(intR), utils_1.sRGBToLinear(intG), utils_1.sRGBToLinear(intB)];\n};\nvar decodeAC = function (value, maximumValue) {\n    var quantR = Math.floor(value / (19 * 19));\n    var quantG = Math.floor(value / 19) % 19;\n    var quantB = value % 19;\n    var rgb = [\n        utils_1.signPow((quantR - 9) / 9, 2.0) * maximumValue,\n        utils_1.signPow((quantG - 9) / 9, 2.0) * maximumValue,\n        utils_1.signPow((quantB - 9) / 9, 2.0) * maximumValue\n    ];\n    return rgb;\n};\nvar decode = function (blurhash, width, height, punch) {\n    validateBlurhash(blurhash);\n    punch = punch | 1;\n    var sizeFlag = base83_1.decode83(blurhash[0]);\n    var numY = Math.floor(sizeFlag / 9) + 1;\n    var numX = (sizeFlag % 9) + 1;\n    var quantisedMaximumValue = base83_1.decode83(blurhash[1]);\n    var maximumValue = (quantisedMaximumValue + 1) / 166;\n    var colors = new Array(numX * numY);\n    for (var i = 0; i < colors.length; i++) {\n        if (i === 0) {\n            var value = base83_1.decode83(blurhash.substring(2, 6));\n            colors[i] = decodeDC(value);\n        }\n        else {\n            var value = base83_1.decode83(blurhash.substring(4 + i * 2, 6 + i * 2));\n            colors[i] = decodeAC(value, maximumValue * punch);\n        }\n    }\n    var bytesPerRow = width * 4;\n    var pixels = new Uint8ClampedArray(bytesPerRow * height);\n    for (var y = 0; y < height; y++) {\n        for (var x = 0; x < width; x++) {\n            var r = 0;\n            var g = 0;\n            var b = 0;\n            for (var j = 0; j < numY; j++) {\n                for (var i = 0; i < numX; i++) {\n                    var basis = Math.cos((Math.PI * x * i) / width) *\n                        Math.cos((Math.PI * y * j) / height);\n                    var color = colors[i + j * numX];\n                    r += color[0] * basis;\n                    g += color[1] * basis;\n                    b += color[2] * basis;\n                }\n            }\n            var intR = utils_1.linearTosRGB(r);\n            var intG = utils_1.linearTosRGB(g);\n            var intB = utils_1.linearTosRGB(b);\n            pixels[4 * x + 0 + y * bytesPerRow] = intR;\n            pixels[4 * x + 1 + y * bytesPerRow] = intG;\n            pixels[4 * x + 2 + y * bytesPerRow] = intB;\n            pixels[4 * x + 3 + y * bytesPerRow] = 255; // alpha\n        }\n    }\n    return pixels;\n};\nexports.default = decode;\n//# sourceMappingURL=decode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar base83_1 = require(\"./base83\");\nvar utils_1 = require(\"./utils\");\nvar error_1 = require(\"./error\");\nvar bytesPerPixel = 4;\nvar multiplyBasisFunction = function (pixels, width, height, basisFunction) {\n    var r = 0;\n    var g = 0;\n    var b = 0;\n    var bytesPerRow = width * bytesPerPixel;\n    for (var x = 0; x < width; x++) {\n        for (var y = 0; y < height; y++) {\n            var basis = basisFunction(x, y);\n            r +=\n                basis * utils_1.sRGBToLinear(pixels[bytesPerPixel * x + 0 + y * bytesPerRow]);\n            g +=\n                basis * utils_1.sRGBToLinear(pixels[bytesPerPixel * x + 1 + y * bytesPerRow]);\n            b +=\n                basis * utils_1.sRGBToLinear(pixels[bytesPerPixel * x + 2 + y * bytesPerRow]);\n        }\n    }\n    var scale = 1 / (width * height);\n    return [r * scale, g * scale, b * scale];\n};\nvar encodeDC = function (value) {\n    var roundedR = utils_1.linearTosRGB(value[0]);\n    var roundedG = utils_1.linearTosRGB(value[1]);\n    var roundedB = utils_1.linearTosRGB(value[2]);\n    return (roundedR << 16) + (roundedG << 8) + roundedB;\n};\nvar encodeAC = function (value, maximumValue) {\n    var quantR = Math.floor(Math.max(0, Math.min(18, Math.floor(utils_1.signPow(value[0] / maximumValue, 0.5) * 9 + 9.5))));\n    var quantG = Math.floor(Math.max(0, Math.min(18, Math.floor(utils_1.signPow(value[1] / maximumValue, 0.5) * 9 + 9.5))));\n    var quantB = Math.floor(Math.max(0, Math.min(18, Math.floor(utils_1.signPow(value[2] / maximumValue, 0.5) * 9 + 9.5))));\n    return quantR * 19 * 19 + quantG * 19 + quantB;\n};\nvar encode = function (pixels, width, height, componentX, componentY) {\n    if (componentX < 1 || componentX > 9 || componentY < 1 || componentY > 9) {\n        throw new error_1.ValidationError(\"BlurHash must have between 1 and 9 components\");\n    }\n    if (width * height * 4 !== pixels.length) {\n        throw new error_1.ValidationError(\"Width and height must match the pixels array\");\n    }\n    var factors = [];\n    var _loop_1 = function (y) {\n        var _loop_2 = function (x) {\n            var normalisation = x == 0 && y == 0 ? 1 : 2;\n            var factor = multiplyBasisFunction(pixels, width, height, function (i, j) {\n                return normalisation *\n                    Math.cos((Math.PI * x * i) / width) *\n                    Math.cos((Math.PI * y * j) / height);\n            });\n            factors.push(factor);\n        };\n        for (var x = 0; x < componentX; x++) {\n            _loop_2(x);\n        }\n    };\n    for (var y = 0; y < componentY; y++) {\n        _loop_1(y);\n    }\n    var dc = factors[0];\n    var ac = factors.slice(1);\n    var hash = \"\";\n    var sizeFlag = componentX - 1 + (componentY - 1) * 9;\n    hash += base83_1.encode83(sizeFlag, 1);\n    var maximumValue;\n    if (ac.length > 0) {\n        var actualMaximumValue = Math.max.apply(Math, ac.map(function (val) { return Math.max.apply(Math, val); }));\n        var quantisedMaximumValue = Math.floor(Math.max(0, Math.min(82, Math.floor(actualMaximumValue * 166 - 0.5))));\n        maximumValue = (quantisedMaximumValue + 1) / 166;\n        hash += base83_1.encode83(quantisedMaximumValue, 1);\n    }\n    else {\n        maximumValue = 1;\n        hash += base83_1.encode83(0, 1);\n    }\n    hash += base83_1.encode83(encodeDC(dc), 4);\n    ac.forEach(function (factor) {\n        hash += base83_1.encode83(encodeAC(factor, maximumValue), 2);\n    });\n    return hash;\n};\nexports.default = encode;\n//# sourceMappingURL=encode.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ValidationError = /** @class */ (function (_super) {\n    __extends(ValidationError, _super);\n    function ValidationError(message) {\n        var _this = _super.call(this, message) || this;\n        _this.name = \"ValidationError\";\n        _this.message = message;\n        return _this;\n    }\n    return ValidationError;\n}(Error));\nexports.ValidationError = ValidationError;\n//# sourceMappingURL=error.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar decode_1 = require(\"./decode\");\nexports.decode = decode_1.default;\nexports.isBlurhashValid = decode_1.isBlurhashValid;\nvar encode_1 = require(\"./encode\");\nexports.encode = encode_1.default;\n__export(require(\"./error\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sRGBToLinear = function (value) {\n    var v = value / 255;\n    if (v <= 0.04045) {\n        return v / 12.92;\n    }\n    else {\n        return Math.pow((v + 0.055) / 1.055, 2.4);\n    }\n};\nexports.linearTosRGB = function (value) {\n    var v = Math.max(0, Math.min(1, value));\n    if (v <= 0.0031308) {\n        return Math.round(v * 12.92 * 255 + 0.5);\n    }\n    else {\n        return Math.round((1.055 * Math.pow(v, 1 / 2.4) - 0.055) * 255 + 0.5);\n    }\n};\nexports.sign = function (n) { return (n < 0 ? -1 : 1); };\nexports.signPow = function (val, exp) {\n    return exports.sign(val) * Math.pow(Math.abs(val), exp);\n};\n//# sourceMappingURL=utils.js.map","'use strict'\n\nfunction isPromise (obj) {\n  // via https://unpkg.com/is-promise@2.1.0/index.js\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function'\n}\n\nfunction registerPromiseWorker (callback) {\n  function postOutgoingMessage (e, messageId, error, result) {\n    function postMessage (msg) {\n      /* istanbul ignore if */\n      if (typeof self.postMessage !== 'function') { // service worker\n        e.ports[0].postMessage(msg)\n      } else { // web worker\n        self.postMessage(msg)\n      }\n    }\n    if (error) {\n      /* istanbul ignore else */\n      if (typeof console !== 'undefined' && 'error' in console) {\n        // This is to make errors easier to debug. I think it's important\n        // enough to just leave here without giving the user an option\n        // to silence it.\n        console.error('Worker caught an error:', error)\n      }\n      postMessage([messageId, {\n        message: error.message\n      }])\n    } else {\n      postMessage([messageId, null, result])\n    }\n  }\n\n  function tryCatchFunc (callback, message) {\n    try {\n      return { res: callback(message) }\n    } catch (e) {\n      return { err: e }\n    }\n  }\n\n  function handleIncomingMessage (e, callback, messageId, message) {\n    var result = tryCatchFunc(callback, message)\n\n    if (result.err) {\n      postOutgoingMessage(e, messageId, result.err)\n    } else if (!isPromise(result.res)) {\n      postOutgoingMessage(e, messageId, null, result.res)\n    } else {\n      result.res.then(function (finalResult) {\n        postOutgoingMessage(e, messageId, null, finalResult)\n      }, function (finalError) {\n        postOutgoingMessage(e, messageId, finalError)\n      })\n    }\n  }\n\n  function onIncomingMessage (e) {\n    var payload = e.data\n    if (!Array.isArray(payload) || payload.length !== 2) {\n      // message doens't match communication format; ignore\n      return\n    }\n    var messageId = payload[0]\n    var message = payload[1]\n\n    if (typeof callback !== 'function') {\n      postOutgoingMessage(e, messageId, new Error(\n        'Please pass a function into register().'))\n    } else {\n      handleIncomingMessage(e, callback, messageId, message)\n    }\n  }\n\n  self.addEventListener('message', onIncomingMessage)\n}\n\nmodule.exports = registerPromiseWorker\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","export const BLURHASH_RESOLUTION = 32\n","// Run a function once, then cache the result and return the cached result thereafter\nexport function thunk (func) {\n  let cached\n  let runOnce\n  return () => {\n    if (!runOnce) {\n      cached = func()\n      runOnce = true\n    }\n    return cached\n  }\n}\n","import { thunk } from '../thunk'\n\nexport const isChrome = thunk(() => process.browser && /Chrome/.test(navigator.userAgent))\n","// checking for Chrome 82 because that's when this bug was fixed\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1053477\n\nimport { thunk } from '../thunk'\nimport { isChrome } from './isChrome'\n\nfunction getChromeVersion () {\n  try {\n    return parseInt(navigator.userAgent.match(/Chrome\\/(\\d+)/)[1], 10) || undefined\n  } catch (e) {\n    return undefined\n  }\n}\n\nexport const isChromePre82 = thunk(() => process.browser && isChrome() && getChromeVersion() < 82)\n","import { decode as decodeBlurHash } from 'blurhash'\nimport registerPromiseWorker from 'promise-worker/register'\nimport { BLURHASH_RESOLUTION as RESOLUTION } from '../_static/blurhash'\nimport { isChromePre82 } from '../_utils/userAgent/isChromePre82'\n\n// Disabled in Chrome because convertToBlob() is slow\n// https://github.com/nolanlawson/pinafore/issues/1396\nconst OFFSCREEN_CANVAS = !isChromePre82() && typeof OffscreenCanvas === 'function'\n  ? new OffscreenCanvas(RESOLUTION, RESOLUTION)\n  : null\nconst OFFSCREEN_CANVAS_CONTEXT_2D = OFFSCREEN_CANVAS\n  ? OFFSCREEN_CANVAS.getContext('2d')\n  : null\n\nregisterPromiseWorker(async (encoded) => {\n  const pixels = decodeBlurHash(encoded, RESOLUTION, RESOLUTION)\n\n  if (!pixels) {\n    throw new Error('decode did not return any pixels')\n  }\n  const imageData = new ImageData(pixels, RESOLUTION, RESOLUTION)\n\n  if (OFFSCREEN_CANVAS) {\n    OFFSCREEN_CANVAS_CONTEXT_2D.putImageData(imageData, 0, 0)\n    const blob = await OFFSCREEN_CANVAS.convertToBlob()\n    const decoded = URL.createObjectURL(blob)\n    return { decoded, imageData: null }\n  } else {\n    return { imageData, decoded: null }\n  }\n})\n"],"sourceRoot":""}