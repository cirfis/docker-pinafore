(()=>{"use strict";var r={403:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"];e.decode83=function(r){for(var e=0,n=0;n<r.length;n++){var o=r[n];e=83*e+t.indexOf(o)}return e},e.encode83=function(r,e){for(var n="",o=1;o<=e;o++){var a=Math.floor(r)/Math.pow(83,e-o)%83;n+=t[Math.floor(a)]}return n}},55:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(403),o=t(96),a=t(795),i=function(r){if(!r||r.length<6)throw new a.ValidationError("The blurhash string must be at least 6 characters");var e=n.decode83(r[0]),t=Math.floor(e/9)+1,o=e%9+1;if(r.length!==4+2*o*t)throw new a.ValidationError("blurhash length mismatch: length is "+r.length+" but it should be "+(4+2*o*t))};e.isBlurhashValid=function(r){try{i(r)}catch(e){return{result:!1,errorReason:e.message}}return{result:!0}};var s=function(r){var e=r>>16,t=r>>8&255,n=255&r;return[o.sRGBToLinear(e),o.sRGBToLinear(t),o.sRGBToLinear(n)]},u=function(r,e){var t=Math.floor(r/361),n=Math.floor(r/19)%19,a=r%19;return[o.signPow((t-9)/9,2)*e,o.signPow((n-9)/9,2)*e,o.signPow((a-9)/9,2)*e]};e.default=function(r,e,t,a){i(r),a|=1;for(var c=n.decode83(r[0]),f=Math.floor(c/9)+1,l=c%9+1,h=(n.decode83(r[1])+1)/166,d=new Array(l*f),v=0;v<d.length;v++)if(0===v){var p=n.decode83(r.substring(2,6));d[v]=s(p)}else{p=n.decode83(r.substring(4+2*v,6+2*v));d[v]=u(p,h*a)}for(var M=4*e,g=new Uint8ClampedArray(M*t),m=0;m<t;m++)for(var y=0;y<e;y++){for(var w=0,_=0,b=0,P=0;P<f;P++)for(v=0;v<l;v++){var B=Math.cos(Math.PI*y*v/e)*Math.cos(Math.PI*m*P/t),x=d[v+P*l];w+=x[0]*B,_+=x[1]*B,b+=x[2]*B}var O=o.linearTosRGB(w),R=o.linearTosRGB(_),T=o.linearTosRGB(b);g[4*y+0+m*M]=O,g[4*y+1+m*M]=R,g[4*y+2+m*M]=T,g[4*y+3+m*M]=255}return g}},796:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(403),o=t(96),a=t(795);e.default=function(r,e,t,i,s){if(i<1||i>9||s<1||s>9)throw new a.ValidationError("BlurHash must have between 1 and 9 components");if(e*t*4!==r.length)throw new a.ValidationError("Width and height must match the pixels array");for(var u=[],c=function(n){for(var a=function(a){var i=0==a&&0==n?1:2,s=function(r,e,t,n){for(var a=0,i=0,s=0,u=4*e,c=0;c<e;c++)for(var f=0;f<t;f++){var l=n(c,f);a+=l*o.sRGBToLinear(r[4*c+0+f*u]),i+=l*o.sRGBToLinear(r[4*c+1+f*u]),s+=l*o.sRGBToLinear(r[4*c+2+f*u])}var h=1/(e*t);return[a*h,i*h,s*h]}(r,e,t,(function(r,o){return i*Math.cos(Math.PI*a*r/e)*Math.cos(Math.PI*n*o/t)}));u.push(s)},s=0;s<i;s++)a(s)},f=0;f<s;f++)c(f);var l,h,d=u[0],v=u.slice(1),p="",M=i-1+9*(s-1);if(p+=n.encode83(M,1),v.length>0){var g=Math.max.apply(Math,v.map((function(r){return Math.max.apply(Math,r)}))),m=Math.floor(Math.max(0,Math.min(82,Math.floor(166*g-.5))));l=(m+1)/166,p+=n.encode83(m,1)}else l=1,p+=n.encode83(0,1);return p+=n.encode83((h=d,(o.linearTosRGB(h[0])<<16)+(o.linearTosRGB(h[1])<<8)+o.linearTosRGB(h[2])),4),v.forEach((function(r){p+=n.encode83(function(r,e){return 19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*o.signPow(r[0]/e,.5)+9.5))))*19+19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*o.signPow(r[1]/e,.5)+9.5))))+Math.floor(Math.max(0,Math.min(18,Math.floor(9*o.signPow(r[2]/e,.5)+9.5))))}(r,l),2)})),p}},795:function(r,e){var t,n=this&&this.__extends||(t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(r,e)},function(r,e){function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(r){function e(e){var t=r.call(this,e)||this;return t.name="ValidationError",t.message=e,t}return n(e,r),e}(Error);e.ValidationError=o},60:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(55);e.decode=n.default,e.isBlurhashValid=n.isBlurhashValid;var o=t(796);e.encode=o.default,function(r){for(var t in r)e.hasOwnProperty(t)||(e[t]=r[t])}(t(795))},96:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sRGBToLinear=function(r){var e=r/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},e.linearTosRGB=function(r){var e=Math.max(0,Math.min(1,r));return e<=.0031308?Math.round(12.92*e*255+.5):Math.round(255*(1.055*Math.pow(e,1/2.4)-.055)+.5)},e.sign=function(r){return r<0?-1:1},e.signPow=function(r,t){return e.sign(r)*Math.pow(Math.abs(r),t)}},847:r=>{r.exports=function(r){function e(r,e,t,n){function o(e){"function"!=typeof self.postMessage?r.ports[0].postMessage(e):self.postMessage(e)}t?("undefined"!=typeof console&&"error"in console&&console.error("Worker caught an error:",t),o([e,{message:t.message}])):o([e,null,n])}self.addEventListener("message",(function(t){var n=t.data;if(Array.isArray(n)&&2===n.length){var o=n[0],a=n[1];"function"!=typeof r?e(t,o,new Error("Please pass a function into register().")):function(r,t,n,o){var a,i=function(e,t){try{return{res:e(t)}}catch(r){return{err:r}}}(t,o);i.err?e(r,n,i.err):!(a=i.res)||"object"!=typeof a&&"function"!=typeof a||"function"!=typeof a.then?e(r,n,null,i.res):i.res.then((function(t){e(r,n,null,t)}),(function(t){e(r,n,t)}))}(t,r,o,a)}}))}}},e={};function t(n){if(e[n])return e[n].exports;var o=e[n]={exports:{}};return r[n].call(o.exports,o,o.exports,t),o.exports}t.n=r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return t.d(e,{a:e}),e},t.d=(r,e)=>{for(var n in e)t.o(e,n)&&!t.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:e[n]})},t.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),(()=>{var r=t(60),e=t(847),n=t.n(e);const o=32;function a(r){let e,t;return()=>(t||(e=r(),t=!0),e)}const i=a((()=>/Chrome/.test(navigator.userAgent)));const s=a((()=>i()&&function(){try{return parseInt(navigator.userAgent.match(/Chrome\/(\d+)/)[1],10)||void 0}catch(r){return}}()<82))()||"function"!=typeof OffscreenCanvas?null:new OffscreenCanvas(o,o),u=s?s.getContext("2d"):null;n()((async e=>{const t=(0,r.decode)(e,o,o);if(!t)throw new Error("decode did not return any pixels");const n=new ImageData(t,o,o);if(s){u.putImageData(n,0,0);const r=await s.convertToBlob();return{decoded:URL.createObjectURL(r),imageData:null}}return{imageData:n,decoded:null}}))})()})();
//# sourceMappingURL=blurhash.f87cb077f8cbb103ff28.blurhash.js.map