{"version":3,"sources":["webpack://pinafore/./node_modules/page-lifecycle/dist/lifecycle.mjs"],"names":["e","EventTarget","t","s","this","push","i","a","indexOf","splice","target","Object","freeze","type","forEach","Event","n","super","newState","oldState","originalEvent","r","h","c","o","d","u","safari","pushNotification","l","self","g","preventDefault","returnValue","b","map","reduce","E","document","visibilityState","hasFocus","bind","addEventListener","setTimeout","defaultPrevented","length","wasDiscarded","removeEventListener","keys","slice","p","dispatchEvent","clearTimeout","persisted"],"mappings":"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","file":"792.5473627e7f4122be232f.792.js","sourcesContent":["/*!\n Copyright 2018 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n/*! lifecycle.mjs v0.1.1 */\nlet e;try{new EventTarget,e=!0}catch(t){e=!1}class t{constructor(){this.e={}}addEventListener(e,t,s=!1){this.t(e).push(t)}removeEventListener(e,t,s=!1){const i=this.t(e),a=i.indexOf(t);a>-1&&i.splice(a,1)}dispatchEvent(e){return e.target=this,Object.freeze(e),this.t(e.type).forEach(t=>t(e)),!0}t(e){return this.e[e]=this.e[e]||[]}}var s=e?EventTarget:t;class i{constructor(e){this.type=e}}var a=e?Event:i;class n extends a{constructor(e,t){super(e),this.newState=t.newState,this.oldState=t.oldState,this.originalEvent=t.originalEvent}}const r=\"active\",h=\"passive\",c=\"hidden\",o=\"frozen\",d=\"terminated\",u=\"object\"==typeof safari&&safari.pushNotification,v=\"onpageshow\"in self,l=[\"focus\",\"blur\",\"visibilitychange\",\"freeze\",\"resume\",\"pageshow\",v?\"pagehide\":\"unload\"],g=e=>(e.preventDefault(),e.returnValue=\"Are you sure?\"),f=e=>e.reduce((e,t,s)=>(e[t]=s,e),{}),b=[[r,h,c,d],[r,h,c,o],[c,h,r],[o,c],[o,r],[o,h]].map(f),p=(e,t)=>{for(let s,i=0;s=b[i];++i){const i=s[e],a=s[t];if(i>=0&&a>=0&&a>i)return Object.keys(s).slice(i,a+1)}return[]},E=()=>document.visibilityState===c?c:document.hasFocus()?r:h;class m extends s{constructor(){super();const e=E();this.s=e,this.i=[],this.a=this.a.bind(this),l.forEach(e=>addEventListener(e,this.a,!0)),u&&addEventListener(\"beforeunload\",e=>{this.n=setTimeout(()=>{e.defaultPrevented||e.returnValue.length>0||this.r(e,c)},0)})}get state(){return this.s}get pageWasDiscarded(){return document.wasDiscarded||!1}addUnsavedChanges(e){!this.i.indexOf(e)>-1&&(0===this.i.length&&addEventListener(\"beforeunload\",g),this.i.push(e))}removeUnsavedChanges(e){const t=this.i.indexOf(e);t>-1&&(this.i.splice(t,1),0===this.i.length&&removeEventListener(\"beforeunload\",g))}r(e,t){if(t!==this.s){const s=this.s,i=p(s,t);for(let t=0;t<i.length-1;++t){const s=i[t],a=i[t+1];this.s=a,this.dispatchEvent(new n(\"statechange\",{oldState:s,newState:a,originalEvent:e}))}}}a(e){switch(u&&clearTimeout(this.n),e.type){case\"pageshow\":case\"resume\":this.r(e,E());break;case\"focus\":this.r(e,r);break;case\"blur\":this.s===r&&this.r(e,E());break;case\"pagehide\":case\"unload\":this.r(e,e.persisted?o:d);break;case\"visibilitychange\":this.s!==o&&this.s!==d&&this.r(e,E());break;case\"freeze\":this.r(e,o)}}}var w=new m;export default w;\n//# sourceMappingURL=lifecycle.mjs.map\n"],"sourceRoot":""}