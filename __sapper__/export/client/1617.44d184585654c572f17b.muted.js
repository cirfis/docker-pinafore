(this.webpackChunkpinafore=this.webpackChunkpinafore||[]).push([[1617],{8305:(t,n,e)=>{"use strict";e.r(n),e.d(n,{default:()=>g});var c=e(4178),r=e(2905),o=e(1382),s=e(671),a=e(2936),i=e(8021),u=e(245),h=e(9322);function l(t,n){var e={accountsFetcher:n.accountsFetcher,accountActions:n.accountActions},c=new s.Z({root:t.root,store:t.store,data:e});return{c(){c._fragment.c()},l(t){c._fragment.l(t)},m(t,n){c._mount(t,n)},p(t,n){var e={};t.accountsFetcher&&(e.accountsFetcher=n.accountsFetcher),t.accountActions&&(e.accountActions=n.accountActions),c._set(e)},d(t){c.destroy(t)}}}function m(t){var n,e,r,o,s,i;if((0,c.S1)(this,t),this.store=a.h,this._state=(0,c.f0)((0,c.f0)(this.store._init(["currentInstance","accessToken","isUserLoggedIn"]),{accountActions:[{icon:"#fa-volume-up",label:"Unmute",onclick:t=>(0,h.O)(t,!1,!1,!0)}]}),t.data),this.store._add(this,["currentInstance","accessToken","isUserLoggedIn"]),this._recompute({$currentInstance:1,$accessToken:1},this._state),this._intro=!0,this._handlers.destroy=[c.iT],this._fragment=(n=this,e=this._state,s=new u.Z({root:n.root,store:n.store,data:{title:"Muted users",icon:"#fa-volume-off"}}),i=e.$isUserLoggedIn&&l(n,e),{c(){s._fragment.c(),r=(0,c.rw)("\n"),i&&i.c(),o=(0,c.Yr)()},l(t){s._fragment.l(t),r=(0,c.M4)(t,"\n"),i&&i.l(t),o=(0,c.Yr)()},m(t,n){s._mount(t,n),(0,c.$T)(t,r,n),i&&i.m(t,n),(0,c.$T)(t,o,n)},p(t,e){e.$isUserLoggedIn?i?i.p(t,e):((i=l(n,e)).c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},d(t){s.destroy(t),t&&(0,c.r2)(r),i&&i.d(t),t&&(0,c.r2)(o)}}),t.target){var m=(0,c.pI)(t.target);t.hydrate?this._fragment.l(m):this._fragment.c(),m.forEach(c.r2),this._mount(t.target,t.anchor),(0,c.yl)(this)}}(0,c.f0)(m.prototype,c.uS),m.prototype._recompute=function(t,n){(t.$currentInstance||t.$accessToken)&&this._differs(n.accountsFetcher,n.accountsFetcher=function({$currentInstance:t,$accessToken:n}){return()=>(0,i.g)(t,n)}(n))&&(t.accountsFetcher=!0)};const f=m;function p(t){var n,e,s,a,i,u;if((0,c.S1)(this,t),this._state=(0,c.f0)({pageComponent:f},t.data),this._intro=!0,this._fragment=(n=this,e=this._state,a=new r.Z({root:n.root,store:n.store,data:{name:"Muted users"}}),i={pageComponent:e.pageComponent,params:e.params},u=new o.Z({root:n.root,store:n.store,data:i}),{c(){a._fragment.c(),s=(0,c.rw)("\n\n  "),u._fragment.c()},l(t){a._fragment.l(t),s=(0,c.M4)(t,"\n\n  "),u._fragment.l(t)},m(t,n){a._mount(t,n),(0,c.$T)(t,s,n),u._mount(t,n)},p(t,n){var e={};t.pageComponent&&(e.pageComponent=n.pageComponent),t.params&&(e.params=n.params),u._set(e)},d(t){a.destroy(t),t&&(0,c.r2)(s),u.destroy(t)}}),t.target){var h=(0,c.pI)(t.target);t.hydrate?this._fragment.l(h):this._fragment.c(),h.forEach(c.r2),this._mount(t.target,t.anchor),(0,c.yl)(this)}}(0,c.f0)(p.prototype,c.uS);const g=p},655:(t,n,e)=>{"use strict";e.d(n,{he:()=>l,hJ:()=>h,Mb:()=>m,r6:()=>f});var c=e(4511),r=e(1029),o=e(8273);var s=e(2909),a=e(2936);async function i(t,n,e){const r=s.F.getAccount(n,t),o=(0,c.D)(n,e,t).then((t=>(s.F.setAccount(n,t),t)));try{a.h.set({currentAccountProfile:await r})}catch(i){console.error(i)}try{a.h.set({currentAccountProfile:await o})}catch(i){console.error(i)}}async function u(t,n,e){const c=s.F.getRelationship(n,t),i=async function(t,n,e){const c=`${(0,r.E)(t)}/api/v1/accounts/relationships?${(0,o.pe)({id:e})}`;return(await(0,o.U2)(c,(0,r.I)(n),{timeout:o.EH}))[0]}(n,e,t).then((t=>(s.F.setRelationship(n,t),t)));try{a.h.set({currentAccountRelationship:await c})}catch(u){console.error(u)}try{a.h.set({currentAccountRelationship:await i})}catch(u){console.error(u)}}async function h(t,n,e){await s.F.setRelationship(t,e);try{a.h.set({currentAccountRelationship:e})}catch(c){console.error(c)}}async function l(){a.h.set({currentAccountProfile:null,currentAccountRelationship:null})}async function m(t){const{currentInstance:n,accessToken:e}=a.h.get();await Promise.all([i(t,n,e),u(t,n,e)])}async function f(t){const{currentInstance:n,accessToken:e}=a.h.get();await u(t,n,e)}},9322:(t,n,e)=>{"use strict";e.d(n,{O:()=>h});var c=e(2936),r=e(1029),o=e(8273);var s=e(6494),a=e(655),i=e(652),u=e(7265);async function h(t,n,e,h){const{currentInstance:l,accessToken:m}=c.h.get();try{let c;c=n?await async function(t,n,e,c){const s=`${(0,r.E)(t)}/api/v1/accounts/${e}/mute`;return(0,o.v_)(s,{notifications:c},(0,r.I)(n),{timeout:o.$Q})}(l,m,t,e):await async function(t,n,e){const c=`${(0,r.E)(t)}/api/v1/accounts/${e}/unmute`;return(0,o.v_)(c,null,(0,r.I)(n),{timeout:o.$Q})}(l,m,t),await(0,a.hJ)(l,t,c),h&&s.A.say(n?"Muted account":"Unmuted account"),(0,i.j)("refreshAccountsList")}catch(f){console.error(f),s.A.say(n?(0,u.A)(["Unable to mute account: ",["error"]],{error:f.message||""}):(0,u.A)(["Unable to unmute account: ",["error"]],{error:f.message||""}))}}},8021:(t,n,e)=>{"use strict";e.d(n,{J:()=>o,g:()=>s});var c=e(8273),r=e(1029);async function o(t,n,e=80){let o=`${(0,r.E)(t)}/api/v1/blocks`;return o+="?"+(0,c.pe)({limit:e}),(0,c.U2)(o,(0,r.I)(n),{timeout:c.EH})}async function s(t,n,e=80){let o=`${(0,r.E)(t)}/api/v1/mutes`;return o+="?"+(0,c.pe)({limit:e}),(0,c.U2)(o,(0,r.I)(n),{timeout:c.EH})}},4511:(t,n,e)=>{"use strict";e.d(n,{Q:()=>o,D:()=>s});var c=e(8273),r=e(1029);function o(t,n){const e=`${(0,r.E)(t)}/api/v1/accounts/verify_credentials`;return(0,c.U2)(e,(0,r.I)(n),{timeout:c.EH})}function s(t,n,e){const o=`${(0,r.E)(t)}/api/v1/accounts/${e}`;return(0,c.U2)(o,(0,r.I)(n),{timeout:c.EH})}},2909:(t,n,e)=>{"use strict";e.d(n,{F:()=>c});const c=new Proxy({},{get:function(t,n){return async function(...c){if(!t[n]){const c=await Promise.all([e.e(3881),e.e(166)]).then(e.bind(e,166));t[n]=c[n]}return t[n].apply(null,c)}}})}}]);
//# sourceMappingURL=1617.44d184585654c572f17b.muted.js.map