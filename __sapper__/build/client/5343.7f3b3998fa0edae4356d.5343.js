(this.webpackChunkpinafore=this.webpackChunkpinafore||[]).push([[5343],{4574:(t,e,n)=>{"use strict";n.d(e,{h:()=>l});var o=n(2936),i=n(1029),s=n(8273);var r=n(6494),a=n(655),c=n(652),u=n(7265);async function l(t,e,n){const{currentInstance:l,accessToken:f}=o.h.get();try{let o;o=e?await async function(t,e,n){const o=`${(0,i.E)(t)}/api/v1/accounts/${n}/block`;return(0,s.v_)(o,null,(0,i.I)(e),{timeout:s.$Q})}(l,f,t):await async function(t,e,n){const o=`${(0,i.E)(t)}/api/v1/accounts/${n}/unblock`;return(0,s.v_)(o,null,(0,i.I)(e),{timeout:s.$Q})}(l,f,t),await(0,a.hJ)(l,t,o),n&&(e?r.A.say("Blocked account"):r.A.say("Unblocked account")),(0,c.j)("refreshAccountsList")}catch(d){console.error(d),r.A.say(e?(0,u.A)(["Unable to block account: ",["error"]],{block:!!e,error:d.message||""}):(0,u.A)(["Unable to unblock account: ",["error"]],{error:d.message||""}))}}},7935:(t,e,n)=>{"use strict";n.d(e,{z:()=>i});var o=n(6494);async function i(t){if(navigator.clipboard)try{return await navigator.clipboard.writeText(t),void o.A.say("Copied to clipboard")}catch(e){console.error(e)}(await n.e(9430).then(n.bind(n,9430)).then((t=>t.default)))(t)}},6389:(t,e,n)=>{"use strict";n.d(e,{d:()=>l});var o=n(2909);var i=n(2936),s=n(9921),r=n(2846);function a(t,e,n){const o=t=>n(t.id);["timelineItemSummaries","timelineItemSummariesToAdd"].forEach((n=>{const r=i.h.getAllTimelineData(t,n);Object.keys(r).forEach((a=>{const c=r[a];if(!e(a))return;const u=c.filter(o);(0,s.Z)(c,u)||i.h.setForTimeline(t,a,{[n]:u})}))}))}async function c(t,e,n){!function(t,e){const n=new Set(e);a(t,(t=>"notifications"!==t),(t=>!n.has(t)))}(t,e),function(t,e){const n=new Set(e);a(t,(t=>"notifications"===t),(t=>!n.has(t)))}(t,n),await o.F.deleteStatusesAndNotifications(t,e,n)}async function u(t,e){const n=await async function(t,e){return o.F.getReblogsForStatus(t,e)}(t,e),i=Array.from(new Set([e].concat(n).filter(Boolean))),s=Array.from(new Set(await async function(t,e){return o.F.getNotificationIdsForStatuses(t,e)}(t,i)));await c(t,i,s)}function l(t,e){(0,r.F)((()=>{u(t,e)}))}},7861:(t,e,n)=>{"use strict";n.d(e,{j:()=>u});var o=n(2936),i=n(8273),s=n(1029);var r=n(6494),a=n(655),c=n(7265);async function u(t,e,n){const{currentInstance:u,accessToken:l}=o.h.get();try{let o;o=e?await async function(t,e,n){const o=`${(0,s.E)(t)}/api/v1/accounts/${n}/follow`;return(0,i.v_)(o,null,(0,s.I)(e),{timeout:i.$Q})}(u,l,t):await async function(t,e,n){const o=`${(0,s.E)(t)}/api/v1/accounts/${n}/unfollow`;return(0,i.v_)(o,null,(0,s.I)(e),{timeout:i.$Q})}(u,l,t),await(0,a.hJ)(u,t,o),n&&r.A.say(e?"Followed account":"Unfollowed account")}catch(f){console.error(f),r.A.say(e?(0,c.A)(["Unable to follow account: ",["error"]],{error:f.message||""}):(0,c.A)(["Unable to unfollow account: ",["error"]],{error:f.message||""}))}}},9322:(t,e,n)=>{"use strict";n.d(e,{O:()=>l});var o=n(2936),i=n(1029),s=n(8273);var r=n(6494),a=n(655),c=n(652),u=n(7265);async function l(t,e,n,l){const{currentInstance:f,accessToken:d}=o.h.get();try{let o;o=e?await async function(t,e,n,o){const r=`${(0,i.E)(t)}/api/v1/accounts/${n}/mute`;return(0,s.v_)(r,{notifications:o},(0,i.I)(e),{timeout:s.$Q})}(f,d,t,n):await async function(t,e,n){const o=`${(0,i.E)(t)}/api/v1/accounts/${n}/unmute`;return(0,s.v_)(o,null,(0,i.I)(e),{timeout:s.$Q})}(f,d,t),await(0,a.hJ)(f,t,o),l&&r.A.say(e?"Muted account":"Unmuted account"),(0,c.j)("refreshAccountsList")}catch(m){console.error(m),r.A.say(e?(0,u.A)(["Unable to mute account: ",["error"]],{error:m.message||""}):(0,u.A)(["Unable to unmute account: ",["error"]],{error:m.message||""}))}}},4591:(t,e,n)=>{"use strict";n.d(e,{H:()=>o});async function o({status:t,account:e}){(await Promise.all([n.e(8311),n.e(7396)]).then(n.bind(n,7396)).then((t=>t.default)))({status:t,account:e})}},9546:(t,e,n)=>{"use strict";n.d(e,{$:()=>i});var o=n(9322);async function i(t,e){e?(await Promise.all([n.e(8311),n.e(2523)]).then(n.bind(n,2523)).then((t=>t.default)))(t):await(0,o.O)(t.id,e,!1,!0)}},5343:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>T});var o=n(4178),i=n(3887),s=n(2936),r=n(9379),a=n(7861),c=n(1029),u=n(8273);var l=n(6494),f=n(6389),d=n(7265);async function m(t){const{currentInstance:e,accessToken:n}=s.h.get();try{const o=await async function(t,e,n){const o=`${(0,c.E)(t)}/api/v1/statuses/${n}`;return(0,u.IV)(o,(0,c.I)(e),{timeout:u.$Q})}(e,n,t);return(0,f.d)(e,t),l.A.say("Toot deleted"),o}catch(o){throw console.error(o),l.A.say((0,d.A)(["Unable to delete toot: ",["error"]],{error:o.message||""})),o}}var h=n(9731),b=n(7421),y=n(1031),k=n(4574);var p=n(2909),v=n(652);async function g(t,e,n){const{currentInstance:o,accessToken:i}=s.h.get();try{e?await async function(t,e,n){const o=`${(0,c.E)(t)}/api/v1/statuses/${n}/pin`;return(0,u.v_)(o,null,(0,c.I)(e),{timeout:u.$Q})}(o,i,t):await async function(t,e,n){const o=`${(0,c.E)(t)}/api/v1/statuses/${n}/unpin`;return(0,u.v_)(o,null,(0,c.I)(e),{timeout:u.$Q})}(o,i,t),n&&l.A.say(e?"Pinned toot":"Unpinned toot"),s.h.setStatusPinned(o,t,e),await p.F.setStatusPinned(o,t,e),(0,v.j)("updatePinnedStatuses")}catch(r){console.error(r),l.A.say(e?(0,d.A)(["Unable to pin toot: ",["error"]],{error:r.message||""}):(0,d.A)(["Unable to unpin toot: ",["error"]],{error:r.message||""}))}}async function w(t,e){const{currentInstance:n,accessToken:o}=s.h.get();try{e?await async function(t,e,n){const o=`${(0,c.E)(t)}/api/v1/statuses/${n}/bookmark`;return(0,u.v_)(o,null,(0,c.I)(e),{timeout:u.$Q})}(n,o,t):await async function(t,e,n){const o=`${(0,c.E)(t)}/api/v1/statuses/${n}/unbookmark`;return(0,u.v_)(o,null,(0,c.I)(e),{timeout:u.$Q})}(n,o,t),e?l.A.say("Bookmarked toot"):l.A.say("Unbookmarked toot"),s.h.setStatusBookmarked(n,t,e),await p.F.setStatusBookmarked(n,t,e)}catch(i){console.error(i),l.A.say(e?(0,d.A)(["Unable to bookmark: ",["error"]],{error:i.message||""}):(0,d.A)(["Unable to unbookmark: ",["error"]],{error:i.message||""}))}}async function I(t,e,n){const{currentInstance:o,accessToken:i}=s.h.get();try{e?await async function(t,e,n){const o=`${(0,c.E)(t)}/api/v1/statuses/${n}/mute`;return(0,u.v_)(o,null,(0,c.I)(e),{timeout:u.$Q})}(o,i,t):await async function(t,e,n){const o=`${(0,c.E)(t)}/api/v1/statuses/${n}/unmute`;return(0,u.v_)(o,null,(0,c.I)(e),{timeout:u.$Q})}(o,i,t),await p.F.setStatusMuted(o,t,e),n&&l.A.say(e?"Muted conversation":"Unmuted conversation")}catch(r){console.error(r),l.A.say(e?(0,d.A)(["Unable to mute conversation: ",["error"]],{error:r.message||""}):(0,d.A)(["Unable to unmute conversation: ",["error"]],{error:r.message||""}))}}var _=n(7935),C=n(4286),$=n(6077);var A=n(9546),U=n(4591);var L={show:h.$,close:b.x,onClick(t){switch(t.key){case"delete":return this.onDeleteClicked();case"pin":return this.onPinClicked();case"follow":return this.onFollowClicked();case"block":return this.onBlockClicked();case"mute":return this.onMuteClicked();case"copy":return this.onCopyClicked();case"muteConversation":return this.onMuteConversationClicked();case"redraft":return this.onRedraft();case"share":return this.onShare();case"report":return this.onReport();case"bookmark":return this.onBookmark()}},async onDeleteClicked(){const{statusId:t}=this.get();this.close(),await m(t)},async onPinClicked(){const{statusId:t,pinned:e}=this.get();this.close(),await g(t,!e,!0)},async onFollowClicked(){const{accountId:t,following:e}=this.get();this.close(),await(0,a.j)(t,!e,!0)},async onBlockClicked(){const{accountId:t,blocking:e}=this.get();this.close(),await(0,k.h)(t,!e,!0)},async onMuteClicked(){const{account:t,muting:e}=this.get();this.close(),await(0,A.$)(t,!e)},async onMuteConversationClicked(){const{statusId:t,mutingConversation:e}=this.get();this.close(),await I(t,!e,!0)},async onCopyClicked(){const{status:t}=this.get(),{url:e}=t;this.close(),await(0,_.z)(e)},async onRedraft(){const{status:t}=this.get();this.close(),await async function(t){const e=m(t.id),n=(0,$.B)(),o=await e;s.h.setComposeData("dialog",{text:o.text||(0,C.g)(t.content,t.mentions),contentWarningShown:!!t.spoiler_text,contentWarning:t.spoiler_text||"",postPrivacy:t.visibility,media:t.media_attachments&&t.media_attachments.map((t=>({description:t.description||"",data:t}))),inReplyToId:t.in_reply_to_id,poll:t.poll&&{multiple:!!t.poll.multiple,options:(t.poll.options||[]).map((t=>t.title))},sensitive:!!t.sensitive}),(await n)()}(t)},async onShare(){const{status:t}=this.get();this.close(),await async function(t){try{await navigator.share({title:t.spoiler_text||void 0,text:(0,C.g)(t.content,t.mentions),url:t.url})}catch(e){l.A.say((0,d.A)(["Unable to share: ",["error"]],{error:e.message||""}))}}(t)},async onReport(){const{status:t,account:e}=this.get();this.close(),await(0,U.H)({status:t,account:e})},async onBookmark(){const{status:t}=this.get();this.close(),await w(t.id,!t.bookmarked)}};function S(t){if((0,o.S1)(this,t),this.store=s.h,this._state=(0,o.f0)((0,o.f0)(this.store._init(["currentAccountRelationship","currentAccountProfile","currentVerifyCredentials","currentStatusModifications"]),{supportsWebShare:"function"==typeof navigator.share}),t.data),this.store._add(this,["currentAccountRelationship","currentAccountProfile","currentVerifyCredentials","currentStatusModifications"]),this._recompute({$currentAccountRelationship:1,$currentAccountProfile:1,$currentVerifyCredentials:1,status:1,statusId:1,$currentStatusModifications:1,verifyCredentials:1,relationship:1,account:1,following:1,followRequested:1,username:1,blocking:1,muting:1,accountId:1,verifyCredentialsId:1,pinned:1,isUser:1,mentions:1,mutingConversation:1,visibility:1,blockLabel:1,blockIcon:1,muteLabel:1,muteIcon:1,followLabel:1,followIcon:1,pinLabel:1,mentionsUser:1,muteConversationLabel:1,muteConversationIcon:1,supportsWebShare:1,isPublicOrUnlisted:1,bookmarkLabel:1},this._state),this._intro=!0,this._handlers.destroy=[o.iT],this._fragment=function(t,e){var n={selectable:!1,items:e.items},s=new r.Z({root:t.root,store:t.store,data:n});s.on("click",(function(e){t.onClick(e)}));var a={id:e.id,label:e.label,title:e.title,shrinkWidthToFit:!0,background:"var(--main-bg)"},c=new i.Z({root:t.root,store:t.store,slots:{default:(0,o.xJ)()},data:a});return{c(){s._fragment.c(),c._fragment.c()},l(t){s._fragment.l(t),c._fragment.l(t)},m(t,e){s._mount(c._slotted.default,null),c._mount(t,e)},p(t,e){var n={};t.items&&(n.items=e.items),s._set(n);var o={};t.id&&(o.id=e.id),t.label&&(o.label=e.label),t.title&&(o.title=e.title),c._set(o)},d(t){s.destroy(),c.destroy(t)}}}(this,this._state),this.root._oncreate.push((()=>{y.U.call(this),this.fire("update",{changed:(0,o.lZ)({},this._state),current:this._state})})),t.target){var e=(0,o.pI)(t.target);t.hydrate?this._fragment.l(e):this._fragment.c(),e.forEach(o.r2),this._mount(t.target,t.anchor),(0,o.yl)(this)}}(0,o.f0)(S.prototype,o.uS),(0,o.f0)(S.prototype,L),S.prototype._recompute=function(t,e){t.$currentAccountRelationship&&this._differs(e.relationship,e.relationship=function({$currentAccountRelationship:t}){return t}(e))&&(t.relationship=!0),t.$currentAccountProfile&&this._differs(e.account,e.account=function({$currentAccountProfile:t}){return t}(e))&&(t.account=!0),t.$currentVerifyCredentials&&this._differs(e.verifyCredentials,e.verifyCredentials=function({$currentVerifyCredentials:t}){return t}(e))&&(t.verifyCredentials=!0),t.status&&this._differs(e.statusId,e.statusId=function({status:t}){return t.id}(e))&&(t.statusId=!0),(t.statusId||t.$currentStatusModifications||t.status)&&this._differs(e.pinned,e.pinned=function({statusId:t,$currentStatusModifications:e,status:n}){return e&&t in e.pins?e.pins[t]:n.pinned}(e))&&(t.pinned=!0),t.verifyCredentials&&this._differs(e.verifyCredentialsId,e.verifyCredentialsId=function({verifyCredentials:t}){return t.id}(e))&&(t.verifyCredentialsId=!0),t.relationship&&(this._differs(e.following,e.following=function({relationship:t}){return t&&t.following}(e))&&(t.following=!0),this._differs(e.followRequested,e.followRequested=function({relationship:t}){return t&&t.requested}(e))&&(t.followRequested=!0)),t.account&&(this._differs(e.accountId,e.accountId=function({account:t}){return t&&t.id}(e))&&(t.accountId=!0),this._differs(e.username,e.username=function({account:t}){return t.username}(e))&&(t.username=!0)),t.relationship&&(this._differs(e.muting,e.muting=function({relationship:t}){return t.muting}(e))&&(t.muting=!0),this._differs(e.blocking,e.blocking=function({relationship:t}){return t.blocking}(e))&&(t.blocking=!0)),(t.following||t.followRequested||t.account||t.username)&&this._differs(e.followLabel,e.followLabel=function({following:t,followRequested:e,account:n,username:o}){return void 0!==t&&n?t||e?(0,d.A)(["Unfollow ",["account"]],{account:`@${o}`}):(0,d.A)(["Follow ",["account"]],{account:`@${o}`}):""}(e))&&(t.followLabel=!0),(t.following||t.followRequested)&&this._differs(e.followIcon,e.followIcon=function({following:t,followRequested:e}){return t?"#fa-user-times":e?"#fa-hourglass":"#fa-user-plus"}(e))&&(t.followIcon=!0),(t.blocking||t.username)&&this._differs(e.blockLabel,e.blockLabel=function({blocking:t,username:e}){return t?(0,d.A)(["Unblock ",["account"]],{account:`@${e}`}):(0,d.A)(["Block ",["account"]],{account:`@${e}`})}(e))&&(t.blockLabel=!0),t.blocking&&this._differs(e.blockIcon,e.blockIcon=function({blocking:t}){return t?"#fa-unlock":"#fa-ban"}(e))&&(t.blockIcon=!0),(t.muting||t.username)&&this._differs(e.muteLabel,e.muteLabel=function({muting:t,username:e}){return t?(0,d.A)(["Unmute ",["account"]],{account:`@${e}`}):(0,d.A)(["Mute ",["account"]],{account:`@${e}`})}(e))&&(t.muteLabel=!0),t.muting&&this._differs(e.muteIcon,e.muteIcon=function({muting:t}){return t?"#fa-volume-up":"#fa-volume-off"}(e))&&(t.muteIcon=!0),(t.accountId||t.verifyCredentialsId)&&this._differs(e.isUser,e.isUser=function({accountId:t,verifyCredentialsId:e}){return t===e}(e))&&(t.isUser=!0),(t.pinned||t.isUser)&&this._differs(e.pinLabel,e.pinLabel=function({pinned:t,isUser:e}){return e?t?"Unpin from profile":"Pin to profile":""}(e))&&(t.pinLabel=!0),t.status&&(this._differs(e.visibility,e.visibility=function({status:t}){return t.visibility}(e))&&(t.visibility=!0),this._differs(e.mentions,e.mentions=function({status:t}){return t.mentions||[]}(e))&&(t.mentions=!0)),(t.mentions||t.verifyCredentialsId)&&this._differs(e.mentionsUser,e.mentionsUser=function({mentions:t,verifyCredentialsId:e}){return!!t.find((t=>t.id===e))}(e))&&(t.mentionsUser=!0),t.status&&this._differs(e.mutingConversation,e.mutingConversation=function({status:t}){return!!t.muted}(e))&&(t.mutingConversation=!0),t.mutingConversation&&(this._differs(e.muteConversationLabel,e.muteConversationLabel=function({mutingConversation:t}){return t?"Unmute conversation":"Mute conversation"}(e))&&(t.muteConversationLabel=!0),this._differs(e.muteConversationIcon,e.muteConversationIcon=function({mutingConversation:t}){return t?"#fa-volume-up":"#fa-volume-off"}(e))&&(t.muteConversationIcon=!0)),t.visibility&&this._differs(e.isPublicOrUnlisted,e.isPublicOrUnlisted=function({visibility:t}){return"public"===t||"unlisted"===t}(e))&&(t.isPublicOrUnlisted=!0),t.status&&this._differs(e.bookmarkLabel,e.bookmarkLabel=function({status:t}){return t.bookmarked?"Unbookmark toot":"Bookmark toot"}(e))&&(t.bookmarkLabel=!0),(t.blockLabel||t.blocking||t.blockIcon||t.muteLabel||t.muteIcon||t.followLabel||t.followIcon||t.following||t.followRequested||t.pinLabel||t.isUser||t.visibility||t.mentionsUser||t.mutingConversation||t.muteConversationLabel||t.muteConversationIcon||t.supportsWebShare||t.isPublicOrUnlisted||t.bookmarkLabel)&&this._differs(e.items,e.items=function({blockLabel:t,blocking:e,blockIcon:n,muteLabel:o,muteIcon:i,followLabel:s,followIcon:r,following:a,followRequested:c,pinLabel:u,isUser:l,visibility:f,mentionsUser:d,mutingConversation:m,muteConversationLabel:h,muteConversationIcon:b,supportsWebShare:y,isPublicOrUnlisted:k,bookmarkLabel:p}){return[l&&{key:"delete",label:"Delete",icon:"#fa-trash"},k&&l&&{key:"pin",label:u,icon:"#fa-thumb-tack"},!l&&!e&&{key:"follow",label:s,icon:r},!l&&{key:"block",label:t,icon:n},!l&&!e&&{key:"mute",label:o,icon:i},(l||d)&&{key:"muteConversation",label:h,icon:b},l&&{key:"redraft",label:"Delete and redraft",icon:"#fa-pencil"},!l&&{key:"report",label:"Report toot",icon:"#fa-flag"},{key:"bookmark",label:p,icon:"#fa-bookmark"},k&&y&&{key:"share",label:"Share toot",icon:"#fa-share-square-o"},k&&{key:"copy",label:"Copy link to toot",icon:"#fa-link"}].filter(Boolean)}(e))&&(t.items=!0)};const P=S;var R=n(7056);function T(t){return(0,R.v)(P,{label:"Status options",title:"",status:t})}},4286:(t,e,n)=>{"use strict";n.d(e,{g:()=>r});var o=n(7569),i=n(4386);const s=new DOMParser;function r(t,e){if(!t)return"";(0,o.B)("statusHtmlToPlainText"),t=(0,i.e)(t);const n=s.parseFromString(t,"text/html");!function(t,e){const n=t.querySelectorAll("a.mention");for(let o=0;o<n.length;o++){const t=n[o],i=t.getAttribute("href"),s=e.find((t=>t.url===i));s&&(t.innerText=`@${s.acct}`)}}(n,e);const r=function(t){let e="";const n=t.querySelectorAll("p");for(let o=0;o<n.length;o++){const i=n[o],s=i.querySelectorAll("br");for(let e=0;e<s.length;e++){const n=s[e];n.parentNode.replaceChild(t.createTextNode("\n"),n)}e+=(o>0?"\n\n":"")+i.textContent}return e}(n);return(0,o.s)("statusHtmlToPlainText"),r}}}]);
//# sourceMappingURL=5343.7f3b3998fa0edae4356d.5343.js.map