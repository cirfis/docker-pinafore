(this.webpackChunkpinafore=this.webpackChunkpinafore||[]).push([[3660],{3068:(t,n,e)=>{"use strict";e.r(n),e.d(n,{default:()=>g});var c=e(4178),o=e(2905),r=e(1382),a=e(671),s=e(2936),i=e(8021),u=e(245),h=e(4574);function l(t,n){var e={accountsFetcher:n.accountsFetcher,accountActions:n.accountActions},c=new a.Z({root:t.root,store:t.store,data:e});return{c(){c._fragment.c()},l(t){c._fragment.l(t)},m(t,n){c._mount(t,n)},p(t,n){var e={};t.accountsFetcher&&(e.accountsFetcher=n.accountsFetcher),t.accountActions&&(e.accountActions=n.accountActions),c._set(e)},d(t){c.destroy(t)}}}function f(t){var n,e,o,r,a,i;if((0,c.S1)(this,t),this.store=s.h,this._state=(0,c.f0)((0,c.f0)(this.store._init(["currentInstance","accessToken","isUserLoggedIn"]),{accountActions:[{icon:"#fa-unlock",label:"Unblock",onclick:t=>(0,h.h)(t,!1,!0)}]}),t.data),this.store._add(this,["currentInstance","accessToken","isUserLoggedIn"]),this._recompute({$currentInstance:1,$accessToken:1},this._state),this._intro=!0,this._handlers.destroy=[c.iT],this._fragment=(n=this,e=this._state,a=new u.Z({root:n.root,store:n.store,data:{title:"Blocked users",icon:"#fa-ban"}}),i=e.$isUserLoggedIn&&l(n,e),{c(){a._fragment.c(),o=(0,c.rw)("\n"),i&&i.c(),r=(0,c.Yr)()},l(t){a._fragment.l(t),o=(0,c.M4)(t,"\n"),i&&i.l(t),r=(0,c.Yr)()},m(t,n){a._mount(t,n),(0,c.$T)(t,o,n),i&&i.m(t,n),(0,c.$T)(t,r,n)},p(t,e){e.$isUserLoggedIn?i?i.p(t,e):((i=l(n,e)).c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(t){a.destroy(t),t&&(0,c.r2)(o),i&&i.d(t),t&&(0,c.r2)(r)}}),t.target){var f=(0,c.pI)(t.target);t.hydrate?this._fragment.l(f):this._fragment.c(),f.forEach(c.r2),this._mount(t.target,t.anchor),(0,c.yl)(this)}}(0,c.f0)(f.prototype,c.uS),f.prototype._recompute=function(t,n){(t.$currentInstance||t.$accessToken)&&this._differs(n.accountsFetcher,n.accountsFetcher=function({$currentInstance:t,$accessToken:n}){return()=>(0,i.J)(t,n)}(n))&&(t.accountsFetcher=!0)};const p=f;function m(t){var n,e,a,s,i,u;if((0,c.S1)(this,t),this._state=(0,c.f0)({pageComponent:p},t.data),this._intro=!0,this._fragment=(n=this,e=this._state,s=new o.Z({root:n.root,store:n.store,data:{name:"Blocked users"}}),i={pageComponent:e.pageComponent,params:e.params},u=new r.Z({root:n.root,store:n.store,data:i}),{c(){s._fragment.c(),a=(0,c.rw)("\n\n  "),u._fragment.c()},l(t){s._fragment.l(t),a=(0,c.M4)(t,"\n\n  "),u._fragment.l(t)},m(t,n){s._mount(t,n),(0,c.$T)(t,a,n),u._mount(t,n)},p(t,n){var e={};t.pageComponent&&(e.pageComponent=n.pageComponent),t.params&&(e.params=n.params),u._set(e)},d(t){s.destroy(t),t&&(0,c.r2)(a),u.destroy(t)}}),t.target){var h=(0,c.pI)(t.target);t.hydrate?this._fragment.l(h):this._fragment.c(),h.forEach(c.r2),this._mount(t.target,t.anchor),(0,c.yl)(this)}}(0,c.f0)(m.prototype,c.uS);const g=m},655:(t,n,e)=>{"use strict";e.d(n,{he:()=>l,hJ:()=>h,Mb:()=>f,r6:()=>p});var c=e(4511),o=e(1029),r=e(8273);var a=e(2909),s=e(2936);async function i(t,n,e){const o=a.F.getAccount(n,t),r=(0,c.D)(n,e,t).then((t=>(a.F.setAccount(n,t),t)));try{s.h.set({currentAccountProfile:await o})}catch(i){console.error(i)}try{s.h.set({currentAccountProfile:await r})}catch(i){console.error(i)}}async function u(t,n,e){const c=a.F.getRelationship(n,t),i=async function(t,n,e){const c=`${(0,o.E)(t)}/api/v1/accounts/relationships?${(0,r.pe)({id:e})}`;return(await(0,r.U2)(c,(0,o.I)(n),{timeout:r.EH}))[0]}(n,e,t).then((t=>(a.F.setRelationship(n,t),t)));try{s.h.set({currentAccountRelationship:await c})}catch(u){console.error(u)}try{s.h.set({currentAccountRelationship:await i})}catch(u){console.error(u)}}async function h(t,n,e){await a.F.setRelationship(t,e);try{s.h.set({currentAccountRelationship:e})}catch(c){console.error(c)}}async function l(){s.h.set({currentAccountProfile:null,currentAccountRelationship:null})}async function f(t){const{currentInstance:n,accessToken:e}=s.h.get();await Promise.all([i(t,n,e),u(t,n,e)])}async function p(t){const{currentInstance:n,accessToken:e}=s.h.get();await u(t,n,e)}},4574:(t,n,e)=>{"use strict";e.d(n,{h:()=>h});var c=e(2936),o=e(1029),r=e(8273);var a=e(6494),s=e(655),i=e(652),u=e(7265);async function h(t,n,e){const{currentInstance:h,accessToken:l}=c.h.get();try{let c;c=n?await async function(t,n,e){const c=`${(0,o.E)(t)}/api/v1/accounts/${e}/block`;return(0,r.v_)(c,null,(0,o.I)(n),{timeout:r.$Q})}(h,l,t):await async function(t,n,e){const c=`${(0,o.E)(t)}/api/v1/accounts/${e}/unblock`;return(0,r.v_)(c,null,(0,o.I)(n),{timeout:r.$Q})}(h,l,t),await(0,s.hJ)(h,t,c),e&&(n?a.A.say("Blocked account"):a.A.say("Unblocked account")),(0,i.j)("refreshAccountsList")}catch(f){console.error(f),a.A.say(n?(0,u.A)(["Unable to block account: ",["error"]],{block:!!n,error:f.message||""}):(0,u.A)(["Unable to unblock account: ",["error"]],{error:f.message||""}))}}},8021:(t,n,e)=>{"use strict";e.d(n,{J:()=>r,g:()=>a});var c=e(8273),o=e(1029);async function r(t,n,e=80){let r=`${(0,o.E)(t)}/api/v1/blocks`;return r+="?"+(0,c.pe)({limit:e}),(0,c.U2)(r,(0,o.I)(n),{timeout:c.EH})}async function a(t,n,e=80){let r=`${(0,o.E)(t)}/api/v1/mutes`;return r+="?"+(0,c.pe)({limit:e}),(0,c.U2)(r,(0,o.I)(n),{timeout:c.EH})}},4511:(t,n,e)=>{"use strict";e.d(n,{Q:()=>r,D:()=>a});var c=e(8273),o=e(1029);function r(t,n){const e=`${(0,o.E)(t)}/api/v1/accounts/verify_credentials`;return(0,c.U2)(e,(0,o.I)(n),{timeout:c.EH})}function a(t,n,e){const r=`${(0,o.E)(t)}/api/v1/accounts/${e}`;return(0,c.U2)(r,(0,o.I)(n),{timeout:c.EH})}},2909:(t,n,e)=>{"use strict";e.d(n,{F:()=>c});const c=new Proxy({},{get:function(t,n){return async function(...c){if(!t[n]){const c=await Promise.all([e.e(3881),e.e(166)]).then(e.bind(e,166));t[n]=c[n]}return t[n].apply(null,c)}}})}}]);
//# sourceMappingURL=3660.483c9b5eabbf8a9516b8.blocked.js.map