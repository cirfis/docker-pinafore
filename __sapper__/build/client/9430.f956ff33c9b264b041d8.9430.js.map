{"version":3,"sources":["webpack://pinafore/./src/routes/_components/dialog/components/CopyDialog.html","webpack://pinafore/./src/routes/_components/dialog/creators/showCopyDialog.js"],"names":["show","close","input","this","refs","range","document","createRange","selectNodeContents","selection","window","getSelection","removeAllRanges","addRange","setSelectionRange","execCommand","copyFromInput","toast","text","get","doubleRAF","focus","length","onCreateDialog","onClick","id","label","title","onShow","showCopyDialog"],"mappings":"kNAmDa,CACPA,KAAI,IACJC,MAAK,IACL,UACE,MAAM,MAAEC,GAAUC,KAAKC,MAnB7B,SAAwBF,GAEtB,MAAMG,EAAQC,SAASC,cACvBF,EAAMG,mBAAmBN,GACzB,MAAMO,EAAYC,OAAOC,eACzBF,EAAUG,kBACVH,EAAUI,SAASR,GACnBH,EAAMY,kBAAkB,EAAG,SAC3BR,SAASS,YAAY,QAYjBC,CAAcd,GACde,EAAA,MAAU,uBACVd,KAAKF,SAEP,SACE,MAAM,KAAEiB,GAASf,KAAKgB,OAChB,MAAEjB,GAAUC,KAAKC,MAEvB,EAAAgB,EAAA,IAAU,KACRlB,EAAMmB,QACNnB,EAAMY,kBAAkB,EAAGI,EAAKI,a,aAjBpCC,EAAA,OAAoBpB,M,0EAqBT,CACXe,KAAM,I,2ZA3DwBM,U,YAXjCC,G,QACAC,M,QACAC,M,kBACiB,E,wIAETC,Y,saAGOV,M,0OAAAA,M,uBARfO,I,oBACAC,O,oBACAC,O,scCAY,SAASE,EAAgBX,GACtC,OAAO,OAAW,EAAY,CAC5BQ,MAAO,YACPC,MAAO,YACPT","file":"9430.f956ff33c9b264b041d8.9430.js","sourcesContent":["<ModalDialog\n  {id}\n  {label}\n  {title}\n  shrinkWidthToFit={true}\n  background=\"var(--main-bg)\"\n  on:show=\"onShow()\"\n>\n  <form class=\"copy-dialog-form\">\n    <input value={text}\n           ref:input\n    >\n    <button type=\"button\" on:click=\"onClick()\">\n      Copy\n    </button>\n  </form>\n</ModalDialog>\n<style>\n  .copy-dialog-form {\n    display: grid;\n    grid-template-rows: min-content min-content;\n    grid-template-columns: 1fr;\n    grid-gap: 10px;\n    padding: 10px 20px;\n    width: 400px;\n    max-width: calc(100% - 40px);\n  }\n</style>\n<script>\n  import ModalDialog from './ModalDialog.html'\n  import { show } from '../helpers/showDialog'\n  import { close } from '../helpers/closeDialog'\n  import { oncreate as onCreateDialog } from '../helpers/onCreateDialog'\n  import { toast } from '../../toast/toast'\n  import { doubleRAF } from '../../../_utils/doubleRAF'\n\n  function copyFromInput (input) {\n    // workarounds for iOS, via https://stackoverflow.com/a/34046084\n    const range = document.createRange()\n    range.selectNodeContents(input)\n    const selection = window.getSelection()\n    selection.removeAllRanges()\n    selection.addRange(range)\n    input.setSelectionRange(0, 9999999)\n    document.execCommand('copy')\n  }\n\n  export default {\n    oncreate () {\n      onCreateDialog.call(this)\n    },\n    methods: {\n      show,\n      close,\n      onClick () {\n        const { input } = this.refs\n        copyFromInput(input)\n        toast.say(\"Copied to clipboard\")\n        this.close()\n      },\n      onShow () {\n        const { text } = this.get()\n        const { input } = this.refs\n        // double raf is to work around a11y-dialog trying to set the input\n        doubleRAF(() => {\n          input.focus()\n          input.setSelectionRange(0, text.length)\n        })\n      }\n    },\n    data: () => ({\n      text: ''\n    }),\n    components: {\n      ModalDialog\n    }\n  }\n</script>\n","import CopyDialog from '../components/CopyDialog.html'\nimport { showDialog } from './showDialog'\n\nexport default function showCopyDialog (text) {\n  return showDialog(CopyDialog, {\n    label: \"Copy link\",\n    title: \"Copy link\",\n    text\n  })\n}\n"],"sourceRoot":""}