{"version":3,"sources":["webpack://pinafore/./src/routes/_components/LoadingPage.html","webpack://pinafore/./src/routes/_components/NotLoggedInHome.html","webpack://pinafore/./src/routes/_components/compose/LazyComposeBox.html","webpack://pinafore/./src/routes/_utils/asyncModules/importComposeBox.js","webpack://pinafore/./src/routes/_components/TimelineHomePage.html","webpack://pinafore/./src/routes/_pages/index.html","webpack://pinafore/./src/routes/_actions/doQuickLoginIfNecessary.js","webpack://pinafore/./src/routes/index.html"],"names":["setTimeout","this","set","shown","composeBox","Promise","all","then","mod","default","importLoggedInStoreExtensions","realm","hidden","undefined","store","timelineInitialized","timelinePreinitialized","hidePage","hideTimeline","$timelineInitialized","$timelinePreinitialized","observe","params","URLSearchParams","location","search","accessToken","get","instanceName","loggedInInstances","loggedInInstancesInOrder","access_token","includes","push","currentInstance","doQuickLoginIfNecessary","$isUserLoggedIn","pageComponent"],"mappings":"yJAwBMA,YAAW,KACTC,KAAKC,IAAI,CAAEC,OAAO,MALF,K,uEAQP,CACXA,OAAO,G,8lBA7BaA,MAAQ,GAAK,UAAQ,mB,mFAArBA,MAAQ,GAAK,UAAQ,qB,ogBCQgV,U,g2EAAhX,uW,uZCCT,MAAOC,SAAoBC,QAAQC,IAAI,CCTP,8HAEpCC,MAAKC,GAAOA,EAAIC,WDSV,EAAAC,EAAA,OAEFT,KAAKC,IAAI,CAAEE,e,0BAZSA,W,6BAAaO,MAAK,SAAGC,Q,gOAARD,O,sBAAQC,Q,SAArBR,a,yMAcT,CACXA,gBAAYS,G,gEAhBH,mB,sGAAVT,W,oaEmCCH,KAAKa,MAAMZ,IAAI,CACba,qBAAqB,EACrBC,wBAAwB,I,+XAOfF,EAAA,E,woBAtCF,e,yBAGwBG,U,+CAE7B,EAAAA,UAAY,EAAAC,cAAY,K,woBAGcA,aAAe,SAAW,IAAE,iB,mIATjCA,e,uKACpCD,S,+EAGgCA,U,WAE7B,EAAAA,UAAY,EAAAC,a,0GAG0BA,aAAe,SAAW,IAAE,oB,wDATjCA,e,ueA4B3C,UAQiB,qBAAEC,EAAoB,wBAAEC,I,OAA+BD,IAAyBC,E,oGAC5E,qBAAED,I,OAA4BA,E,6DC9BnD,MAKa,CACPE,QAAO,M,oBCXN,WACL,MAAMC,EAAS,IAAIC,gBAAgBC,SAASC,QACtCC,EAAcJ,EAAOK,IAAI,eACzBC,EAAeN,EAAOK,IAAI,gBAChC,IAAKD,IAAgBE,EACnB,OAEF,MAAM,kBACJC,EAAiB,yBACjBC,GACEhB,EAAA,QAEJe,EAAkBD,GAAgB,CAChCG,aAAcL,GAGXI,EAAyBE,SAASJ,IACrCE,EAAyBG,KAAKL,GAGhCd,EAAA,MAAU,CACRoB,gBAAiBN,EACjBC,oBACAC,6BAEFhB,EAAA,UACA,QAAK,KDnBDqB,G,yVAEWrB,EAAA,E,kNAhBZsB,gBAAe,E,mnBEeH,CACXC,cAAa,G,yIAdNA,c,SAAgBf,Q,gRAAhBe,e,sBAAgBf,Q","file":"4826.5fc073f1d3f03208f591.index.js","sourcesContent":["<div class=\"loading-page {shown ? '' : 'hidden'}\">\n  <LoadingSpinner />\n</div>\n<style>\n  .loading-page {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 150px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 50;\n    transition: opacity 0.25s linear;\n  }\n</style>\n<script>\n  import LoadingSpinner from './LoadingSpinner.html'\n\n  const SPINNER_DELAY = 700\n\n  export default {\n    oncreate () {\n      setTimeout(() => {\n        this.set({ shown: true })\n      }, SPINNER_DELAY)\n    },\n    data: () => ({\n      shown: false\n    }),\n    components: {\n      LoadingSpinner\n    }\n  }\n</script>","<HiddenFromSSR>\n  <FreeTextLayout>\n    <div class=\"not-logged-in-home\">\n      <div class=\"banner\">\n        <SvgIcon className=\"not-logged-in-home-svg\" href=\"#pinafore-logo\" />\n        <h1>Pinafore</h1>\n      </div>\n      <div>\n        {@html \"<p> Pinafore is a web client for <a rel=\\\"noopener\\\" target=\\\"_blank\\\" href=\\\"https://joinmastodon.org\\\">Mastodon</a>, designed for speed and simplicity. </p> <p> Read the <a rel=\\\"noopener\\\" target=\\\"_blank\\\" href=\\\"https://nolanlawson.com/2018/04/09/introducing-pinafore-for-mastodon/\\\">introductory blog post</a>, or get started by logging in to an instance: </p>\"}\n        <p style=\"text-align: right;\">\n          <a class=\"button primary\" rel=\"prefetch\" href=\"/settings/instances/add\">Log in</a>\n        </p>\n      </div>\n  </FreeTextLayout>\n</HiddenFromSSR>\n<style>\n  .not-logged-in-home {\n    margin: 10px;\n  }\n  .not-logged-in-home .banner {\n    display: flex;\n    align-items: center;\n    margin: 0 0 30px;\n  }\n  :global(.not-logged-in-home-svg) {\n    width: 70px;\n    height: 70px;\n    fill: var(--banner-fill);\n    display: inline-block;\n  }\n  .not-logged-in-home h1 {\n    color: var(--banner-fill);\n    display: inline-block;\n    font-size: 3em;\n    margin: auto 15px;\n  }\n\n  @media (max-width: 767px) {\n    .not-logged-in-home h1 {\n      font-size: 2.7em;\n    }\n  }\n\n  @media (max-width: 240px) {\n    .not-logged-in-home h1 {\n      font-size: 2.5em;\n    }\n  }\n</style>\n<script>\n  import FreeTextLayout from './FreeTextLayout.html'\n  import HiddenFromSSR from './HiddenFromSSR.html'\n  import SvgIcon from './SvgIcon.html'\n\n  export default {\n    components: {\n      FreeTextLayout,\n      HiddenFromSSR,\n      SvgIcon\n    }\n  }\n</script>\n","{#if composeBox}\n  <svelte:component this={composeBox} {realm} {hidden} />\n{/if}\n<script>\n  import { importComposeBox } from '../../_utils/asyncModules/importComposeBox'\n  import { importLoggedInStoreExtensions } from '../../_utils/asyncModules/importLoggedInStoreExtensions'\n\n  export default {\n    async oncreate () {\n      const [composeBox] = await Promise.all([\n        importComposeBox(),\n        importLoggedInStoreExtensions()\n      ])\n      this.set({ composeBox })\n    },\n    data: () => ({\n      composeBox: undefined\n    })\n  }\n</script>\n","export const importComposeBox = () => import(\n  '../../_components/compose/ComposeBox.html'\n).then(mod => mod.default)\n","<!--\n     Same as TimelinePage.html, but needs to manage visibility of ComposeBox itself\n     without a div wrapper due to sticky-positioned compose button.\n     TODO: this is a bit hacky due to code duplication\n -->\n<div class=\"timeline-home-page\" aria-busy={hideTimeline}>\n  {#if hidePage}\n    <LoadingPage />\n  {/if}\n  <LazyComposeBox realm=\"home\" hidden={hidePage}/>\n  <div class=\"timeline-home-anchor-container\">\n    {#if !hidePage && hideTimeline}\n      <LoadingPage />\n    {/if}\n    <div class=\"timeline-home-reveal-container {hideTimeline ? 'hidden' : ''}\">\n      <LazyTimeline timeline=\"home\" />\n    </div>\n  </div>\n</div>\n<style>\n  .timeline-home-page, .timeline-home-anchor-container {\n    position: relative;\n  }\n  .timeline-home-reveal-container {\n    transition: opacity 0.2s linear; /* main page reveal */\n  }\n</style>\n<script>\n  import LazyTimeline from './timeline/LazyTimeline.html'\n  import { store } from '../_store/store.js'\n  import LoadingPage from './LoadingPage.html'\n  import LazyComposeBox from './compose/LazyComposeBox.html'\n\n  export default {\n    oncreate () {\n      this.store.set({\n        timelineInitialized: false,\n        timelinePreinitialized: false\n      })\n    },\n    computed: {\n      hidePage: ({ $timelineInitialized, $timelinePreinitialized }) => !$timelineInitialized && !$timelinePreinitialized,\n      hideTimeline: ({ $timelineInitialized }) => !$timelineInitialized\n    },\n    store: () => store,\n    components: {\n      LazyComposeBox,\n      LazyTimeline,\n      LoadingPage\n    }\n  }\n</script>\n","{#if $isUserLoggedIn}\n  <TimelineHomePage/>\n{:else}\n  <NotLoggedInHome/>\n{/if}\n<script>\n  import NotLoggedInHome from '../_components/NotLoggedInHome.html'\n  import { store } from '../_store/store.js'\n  import TimelineHomePage from '../_components/TimelineHomePage.html'\n  import { observe } from 'svelte-extras'\n  import { doQuickLoginIfNecessary } from '../_actions/doQuickLoginIfNecessary'\n\n  export default {\n    async oncreate () {\n      doQuickLoginIfNecessary()\n    },\n    store: () => store,\n    methods: {\n      observe\n    },\n    components: {\n      NotLoggedInHome,\n      TimelineHomePage\n    }\n  }\n</script>\n","// \"Secret\" API to quickly log in with an access token and instance name.\n// Used in the integration tests. Can't see a problem with exposing this publicly\n// since you would have to know the access token anyway.\n\nimport { store } from '../_store/store'\nimport { goto } from '../../../__sapper__/client'\n\nexport function doQuickLoginIfNecessary () {\n  const params = new URLSearchParams(location.search)\n  const accessToken = params.get('accessToken')\n  const instanceName = params.get('instanceName')\n  if (!accessToken || !instanceName) {\n    return\n  }\n  const {\n    loggedInInstances,\n    loggedInInstancesInOrder\n  } = store.get()\n\n  loggedInInstances[instanceName] = {\n    access_token: accessToken\n  }\n\n  if (!loggedInInstancesInOrder.includes(instanceName)) {\n    loggedInInstancesInOrder.push(instanceName)\n  }\n\n  store.set({\n    currentInstance: instanceName,\n    loggedInInstances,\n    loggedInInstancesInOrder\n  })\n  store.save()\n  goto('/') // re-navigate without the URL params\n}\n","<Title name=\"Home\" />\n\n  <LazyPage {pageComponent} {params} />\n\n<script>\n  import Title from './_components/Title.html'\n  import LazyPage from './_components/LazyPage.html'\n  import pageComponent from './_pages/index.html'\n\n  export default {\n    components: {\n\n      Title,\n      LazyPage\n    },\n    data: () => ({\n      pageComponent\n    })\n  }\n</script>\n"],"sourceRoot":""}