(this.webpackChunkpinafore=this.webpackChunkpinafore||[]).push([[4990],{8848:(t,e,s)=>{"use strict";s.d(e,{Z:()=>r});var n=s(624),a=s(9122);const r=function(t,e,s){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return(0,a.Z)(s)&&(r="leading"in s?!!s.leading:r,o="trailing"in s?!!s.trailing:o),(0,n.Z)(t,e,{leading:r,maxWait:e,trailing:o})}},6994:(t,e,s)=>{"use strict";s.d(e,{Z:()=>r});var n=s(4178);function a(t){var e,s,a,r,o,i;if((0,n.S1)(this,t),this._state=(0,n.f0)({},t.data),this._intro=!0,this._slotted=t.slots||{},document.getElementById("svelte-1myrvov-style")||((e=(0,n.az)("style")).id="svelte-1myrvov-style",e.textContent=".search-result.svelte-1myrvov{box-sizing:border-box;border-bottom:1px solid var(--main-border);display:flex}.search-result.svelte-1myrvov:last-child{border-bottom:none}.search-result-anchor.svelte-1myrvov{padding:20px;flex:1;background:var(--settings-list-item-bg)}.search-result-anchor.svelte-1myrvov,.search-result-anchor.svelte-1myrvov:visited{color:var(--body-text-color)}.search-result-anchor.svelte-1myrvov:hover{background:var(--settings-list-item-bg-hover);text-decoration:none}.search-result-anchor.svelte-1myrvov:active{background:var(--settings-list-item-bg-active)}@media(max-width: 767px){.search-result-anchor.svelte-1myrvov{padding:15px 10px}}",(0,n.R3)(document.head,e)),this._fragment=(s=this,a=this._state,i=s._slotted.default,{c(){r=(0,n.az)("li"),o=(0,n.az)("a"),this.h()},l(t){r=(0,n.d$)(t,"LI",{class:!0},!1);var e=(0,n.pI)(r);o=(0,n.d$)(e,"A",{href:!0,class:!0,rel:!0},!1),(0,n.pI)(o).forEach(n.r2),e.forEach(n.r2),this.h()},h(){o.href=a.href,o.className="search-result-anchor svelte-1myrvov",o.rel="prefetch",r.className="search-result svelte-1myrvov"},m(t,e){(0,n.$T)(t,r,e),(0,n.R3)(r,o),i&&(0,n.R3)(o,i)},p(t,e){t.href&&(o.href=e.href)},d(t){t&&(0,n.r2)(r),i&&(0,n.R_)(o,i)}}),t.target){var c=(0,n.pI)(t.target);t.hydrate?this._fragment.l(c):this._fragment.c(),c.forEach(n.r2),this._mount(t.target,t.anchor)}}(0,n.f0)(a.prototype,n.uS);const r=a},2334:(t,e,s)=>{"use strict";s.d(e,{Z:()=>i});var n=s(4178),a=s(6994),r=s(6957);function o(t){var e,s,o,i,c,l;if((0,n.S1)(this,t),this._state=(0,n.f0)({},t.data),this._intro=!0,this._fragment=(e=this,s=this._state,o={index:s.index,length:s.length,timelineType:"search",timelineValue:"search",status:s.status},i=new r.Z({root:e.root,store:e.store,data:o}),c={href:"/statuses/"+s.status.id},l=new a.Z({root:e.root,store:e.store,slots:{default:(0,n.xJ)()},data:c}),{c(){i._fragment.c(),l._fragment.c()},l(t){i._fragment.l(t),l._fragment.l(t)},m(t,e){i._mount(l._slotted.default,null),l._mount(t,e)},p(t,e){var s={};t.index&&(s.index=e.index),t.length&&(s.length=e.length),t.status&&(s.status=e.status),i._set(s);var n={};t.status&&(n.href="/statuses/"+e.status.id),l._set(n)},d(t){i.destroy(),l.destroy(t)}}),t.target){var h=(0,n.pI)(t.target);t.hydrate?this._fragment.l(h):this._fragment.c(),h.forEach(n.r2),this._mount(t.target,t.anchor),(0,n.yl)(this)}}(0,n.f0)(o.prototype,n.uS);const i=o},3206:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>w});var n=s(4178),a=s(2905),r=s(1382),o=s(2936),i=s(3512),c=s(2334),l=s(6494),h=s(245),d=s(7727),u=s(9054),g=s(7265);async function m(){try{const{currentInstance:t}=this.store.get();await(0,u.Ac)(t);const{accessToken:e,currentVerifyCredentials:s}=this.store.get(),n=await(0,d.z)(t,e,s.id);this.set({statuses:n})}catch(t){l.A.say((0,g.A)(["Error: ",["error"]],{error:(t.name||"")+" "+(t.message||"")}))}finally{this.set({loading:!1})}}function f(t,e,s){const n=Object.create(t);return n.status=e[s],n.index=s,n}function v(t,e){var s;function a(t){return t.loading?y:t.statuses&&t.statuses.length?p:void 0}var r=a(e),o=r&&r(t,e);return{c(){s=(0,n.az)("div"),o&&o.c(),this.h()},l(t){s=(0,n.d$)(t,"DIV",{class:!0},!1);var e=(0,n.pI)(s);o&&o.l(e),e.forEach(n.r2),this.h()},h(){s.className="pinned-toots-page svelte-1sexoq"},m(t,e){(0,n.$T)(t,s,e),o&&o.m(s,null)},p(e,n){r===(r=a(n))&&o?o.p(e,n):(o&&o.d(1),(o=r&&r(t,n))&&o.c(),o&&o.m(s,null))},d(t){t&&(0,n.r2)(s),o&&o.d()}}}function p(t,e){for(var s,a=e.statuses,r=[],o=0;o<a.length;o+=1)r[o]=_(t,f(e,a,o));return{c(){s=(0,n.az)("ul");for(var t=0;t<r.length;t+=1)r[t].c();this.h()},l(t){s=(0,n.d$)(t,"UL",{class:!0},!1);for(var e=(0,n.pI)(s),a=0;a<r.length;a+=1)r[a].l(e);e.forEach(n.r2),this.h()},h(){s.className="pinned-toots-results svelte-1sexoq"},m(t,e){(0,n.$T)(t,s,e);for(var a=0;a<r.length;a+=1)r[a].m(s,null)},p(e,n){if(e.statuses){a=n.statuses;for(var o=0;o<a.length;o+=1){const i=f(n,a,o);r[o]?r[o].p(e,i):(r[o]=_(t,i),r[o].c(),r[o].m(s,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=a.length}},d(t){t&&(0,n.r2)(s),(0,n.kw)(r,t)}}}function y(t,e){var s=new i.Z({root:t.root,store:t.store});return{c(){s._fragment.c()},l(t){s._fragment.l(t)},m(t,e){s._mount(t,e)},p:n.ZT,d(t){s.destroy(t)}}}function _(t,e){var s={status:e.status,index:e.index,length:e.statuses.length},n=new c.Z({root:t.root,store:t.store,data:s});return{c(){n._fragment.c()},l(t){n._fragment.l(t)},m(t,e){n._mount(t,e)},p(t,e){var s={};t.statuses&&(s.status=e.status),t.statuses&&(s.length=e.statuses.length),n._set(s)},d(t){n.destroy(t)}}}function I(t){var e,s,a,r,i,c,l;if((0,n.S1)(this,t),this.store=o.h,this._state=(0,n.f0)((0,n.f0)(this.store._init(["isUserLoggedIn"]),{loading:!0,accounts:[]}),t.data),this.store._add(this,["isUserLoggedIn"]),this._intro=!0,this._handlers.destroy=[n.iT],document.getElementById("svelte-1sexoq-style")||((e=(0,n.az)("style")).id="svelte-1sexoq-style",e.textContent=".pinned-toots-page.svelte-1sexoq{padding:20px 20px;position:relative}.pinned-toots-results.svelte-1sexoq{list-style:none;box-sizing:border-box;border:1px solid var(--main-border);border-radius:2px}@media(max-width: 767px){.pinned-toots-page.svelte-1sexoq{padding:20px 10px}}",(0,n.R3)(document.head,e)),this._fragment=(s=this,a=this._state,c=new h.Z({root:s.root,store:s.store,data:{title:"Pinned toots",icon:"#fa-thumb-tack"}}),l=a.$isUserLoggedIn&&v(s,a),{c(){c._fragment.c(),r=(0,n.rw)("\n"),l&&l.c(),i=(0,n.Yr)()},l(t){c._fragment.l(t),r=(0,n.M4)(t,"\n"),l&&l.l(t),i=(0,n.Yr)()},m(t,e){c._mount(t,e),(0,n.$T)(t,r,e),l&&l.m(t,e),(0,n.$T)(t,i,e)},p(t,e){e.$isUserLoggedIn?l?l.p(t,e):((l=v(s,e)).c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},d(t){c.destroy(t),t&&(0,n.r2)(r),l&&l.d(t),t&&(0,n.r2)(i)}}),this.root._oncreate.push((()=>{m.call(this),this.fire("update",{changed:(0,n.lZ)({},this._state),current:this._state})})),t.target){var d=(0,n.pI)(t.target);t.hydrate?this._fragment.l(d):this._fragment.c(),d.forEach(n.r2),this._mount(t.target,t.anchor),(0,n.yl)(this)}}(0,n.f0)(I.prototype,n.uS);const x=I;function b(t){var e,s,o,i,c,l;if((0,n.S1)(this,t),this._state=(0,n.f0)({pageComponent:x},t.data),this._intro=!0,this._fragment=(e=this,s=this._state,i=new a.Z({root:e.root,store:e.store,data:{name:"Pinned toots"}}),c={pageComponent:s.pageComponent,params:s.params},l=new r.Z({root:e.root,store:e.store,data:c}),{c(){i._fragment.c(),o=(0,n.rw)("\n\n  "),l._fragment.c()},l(t){i._fragment.l(t),o=(0,n.M4)(t,"\n\n  "),l._fragment.l(t)},m(t,e){i._mount(t,e),(0,n.$T)(t,o,e),l._mount(t,e)},p(t,e){var s={};t.pageComponent&&(s.pageComponent=e.pageComponent),t.params&&(s.params=e.params),l._set(s)},d(t){i.destroy(t),t&&(0,n.r2)(o),l.destroy(t)}}),t.target){var h=(0,n.pI)(t.target);t.hydrate?this._fragment.l(h):this._fragment.c(),h.forEach(n.r2),this._mount(t.target,t.anchor),(0,n.yl)(this)}}(0,n.f0)(b.prototype,n.uS);const w=b},9054:(t,e,s)=>{"use strict";s.d(e,{Lr:()=>u,jh:()=>m,rd:()=>g,Q:()=>v,Ac:()=>f});var n=s(4511),a=s(2936),r=s(3734),o=s(6494),i=s(8313),c=s(3242),l=s(1281),h=s(2909);var d=s(7265);function u(t,e){const{instanceThemes:s}=a.h.get();s[t]=e,a.h.set({instanceThemes:s}),a.h.save();const{currentInstance:n}=a.h.get();if(t===n){const{enableGrayscale:t}=a.h.get();(0,r.Xi)(e,t)}}function g(t){const{instanceThemes:e}=a.h.get();a.h.set({currentInstance:t,searchResults:null,queryInSearch:""}),a.h.save();const{enableGrayscale:s}=a.h.get();(0,r.Xi)(e[t],s)}async function m(t,e){e=e||(0,d.A)(["Logged out of ",["instance"]],{instance:t});const{composeData:n,currentInstance:c,customEmoji:l,instanceInfos:u,instanceLists:g,instanceThemes:m,loggedInInstances:f,loggedInInstancesInOrder:v,verifyCredentials:p}=a.h.get();v.splice(v.indexOf(t),1);const y=t===c?v[0]:c,_=[n,l,u,g,m,f,p];for(const s of _)delete s[t];a.h.set({composeData:n,currentInstance:y,customEmoji:l,instanceInfos:u,instanceLists:g,instanceThemes:m,loggedInInstances:f,loggedInInstancesInOrder:v,queryInSearch:"",searchResults:null,timelineInitialized:!1,timelinePreinitialized:!1,verifyCredentials:p}),a.h.clearTimelineDataForInstance(t),a.h.clearAutosuggestDataForInstance(t),a.h.save();const{virtualListStore:I}=await Promise.all([s.e(9921),s.e(1257),s.e(1089)]).then(s.bind(s,1257));I.clearRealmByPrefix(c+"/"),o.A.say(e);const{enableGrayscale:x}=a.h.get();(0,r.Xi)(m[y],x),h.F.clearDatabaseForInstance(t),(0,i.E9)("/settings/instances")}async function f(t){const{loggedInInstances:e}=a.h.get(),s=e[t].access_token;await(0,c.u)((()=>(0,n.Q)(t,s).catch(function(t){return async e=>{throw e.message.startsWith("401:")&&await m(t,(0,d.A)(["The access token was revoked, logged out of ",["instance"]],{instance:t})),e}}(t))),(()=>h.F.getInstanceVerifyCredentials(t)),(e=>h.F.setInstanceVerifyCredentials(t,e)),(e=>function(t,e){const{verifyCredentials:s}=a.h.get();s[t]=e,a.h.set({verifyCredentials:s})}(t,e)))}async function v(t){await(0,c.u)((()=>(0,l.s)(t)),(()=>h.F.getInstanceInfo(t)),(e=>h.F.setInstanceInfo(t,e)),(e=>{const{instanceInfos:s}=a.h.get();s[t]=e,a.h.set({instanceInfos:s})}))}},1281:(t,e,s)=>{"use strict";s.d(e,{s:()=>r});var n=s(8273),a=s(1029);function r(t){const e=`${(0,a.E)(t)}/api/v1/instance`;return(0,n.U2)(e,null,{timeout:n.EH})}},7727:(t,e,s)=>{"use strict";s.d(e,{z:()=>r});var n=s(8273),a=s(1029);async function r(t,e,s){let r=`${(0,a.E)(t)}/api/v1/accounts/${s}/statuses`;return r+="?"+(0,n.pe)({limit:40,pinned:!0}),(0,n.U2)(r,(0,a.I)(e),{timeout:n.EH})}}}]);
//# sourceMappingURL=4990.4725b2c0f00923db9b33.pinned.js.map