!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.fileDropElement={})}(this,function(t){function e(t,e,i){const s=Array.from(t);let n;if(""===e)return n=s.filter(t=>"file"===t.kind),i?n:[n[0]];const r=e.toLowerCase().split(",").map(t=>t.split("/").map(t=>t.trim())).filter(t=>2===t.length);return n=n=s.filter(t=>{if("file"!==t.kind)return!1;const[e,i]=t.type.toLowerCase().split("/").map(t=>t.trim());for(const[t,s]of r)if(e===t&&("*"===s||i===s))return!0;return!1}),!1===i&&(n=[n[0]]),n}function i(t,i,s){const n=[];return e(t.items,i,s).forEach(t=>{const e=t.getAsFile();null!==e&&n.push(e)}),n}class s extends Event{constructor(t,e){var i,n;super(t,e),(i=this)instanceof(n=s)||Object.setPrototypeOf(i,n.prototype),this._files=e.files,this._action=e.action}get action(){return this._action}get files(){return this._files}}class n extends HTMLElement{constructor(){super(),this._dragEnterCount=0,this._onDragEnter=this._onDragEnter.bind(this),this._onDragLeave=this._onDragLeave.bind(this),this._onDrop=this._onDrop.bind(this),this._onPaste=this._onPaste.bind(this),this.addEventListener("dragover",t=>t.preventDefault()),this.addEventListener("drop",this._onDrop),this.addEventListener("dragenter",this._onDragEnter),this.addEventListener("dragend",()=>this._reset()),this.addEventListener("dragleave",this._onDragLeave),this.addEventListener("paste",this._onPaste)}get accept(){return this.getAttribute("accept")||""}set accept(t){this.setAttribute("accept",t)}get multiple(){return this.getAttribute("multiple")}set multiple(t){this.setAttribute("multiple",t||"")}_onDragEnter(t){if(this._dragEnterCount+=1,this._dragEnterCount>1)return;if(null===t.dataTransfer)return void this.classList.add("drop-invalid");const i=e(t.dataTransfer.items,this.accept,null!==this.multiple);this.classList.add(!t.dataTransfer||!t.dataTransfer.items.length||void 0!==i[0]?"drop-valid":"drop-invalid")}_onDragLeave(){this._dragEnterCount-=1,0===this._dragEnterCount&&this._reset()}_onDrop(t){if(t.preventDefault(),null===t.dataTransfer)return;this._reset();const e=i(t.dataTransfer,this.accept,null!==this.multiple);void 0!==e&&this.dispatchEvent(new s("filedrop",{action:"drop",files:e}))}_onPaste(t){if(!t.clipboardData)return;const e=i(t.clipboardData,this.accept,void 0!==this.multiple);void 0!==e&&this.dispatchEvent(new s("filedrop",{action:"paste",files:e}))}_reset(){this._dragEnterCount=0,this.classList.remove("drop-valid"),this.classList.remove("drop-invalid")}}customElements.define("file-drop",n),t.FileDropEvent=s,t.FileDropElement=n});
//# sourceMappingURL=filedrop.umd.js.map
